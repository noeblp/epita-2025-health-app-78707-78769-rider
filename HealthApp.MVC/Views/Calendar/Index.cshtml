@{
    ViewData["Title"] = "Calendrier Dynamique";
    int year = ViewBag.CurrentYear;
    int month = ViewBag.CurrentMonth;
    int week = ViewBag.CurrentWeek;
    var events = ViewBag.Events as List<hospital.Models.Calendar>;
    var startOfWeek = ViewBag.StartOfWeek as DateTime? ?? DateTime.Now;
}

<h2 style="text-align: center; font-size: 1.5rem;">Semaine du @startOfWeek.ToString("dd MMMM yyyy")</h2>

<!-- Centrage du tableau avec flexbox -->
<div style="display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; height: 100vh;">
    <table style="width: 100%; max-width: 1000px; border-collapse: collapse; height: 100%; overflow: auto;">
        <thead>
        <tr style="background-color: #f0f0f0; height: 5%">
            <th style="flex: 1; text-align: center; padding: 5px;">Lun</th>
            <th style="flex: 1; text-align: center; padding: 5px;">Mar</th>
            <th style="flex: 1; text-align: center; padding: 5px;">Mer</th>
            <th style="flex: 1; text-align: center; padding: 5px;">Jeu</th>
            <th style="flex: 1; text-align: center; padding: 5px;">Ven</th>
            <th style="flex: 1; text-align: center; padding: 5px;">Sam</th>
            <th style="flex: 1; text-align: center; padding: 5px;">Dim</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            @for (int i = 0; i < 7; i++)
            {
                var currentDate = startOfWeek.AddDays(i);
                var eventToday = events?.FirstOrDefault(e => e.Date.Date == currentDate.Date);
                <td style="border: 1px solid black; text-align: center; vertical-align: top; padding: 10px; font-size: 1rem;">
                    <b>@currentDate.Day</b>
                    @if (eventToday != null)
                    {
                        <br><span style="color: red; font-weight: bold;">@eventToday.Title</span>
                    }
                </td>
            }
        </tr>
        </tbody>
    </table>
</div>

<!-- Liens pour navigation entre les semaines -->
<div style="text-align: left; margin-top: 20px; border: 2px solid #000; padding: 10px; display: flex; justify-content: flex-start; position: fixed; left: 10px; bottom: 20px; width: auto;">
    <a href="@Url.Action("Index", new { year = year, month = month, week = week - 1 })" style="text-decoration: none; color: #000; font-size: 1rem;">← Semaine précédente</a>
</div>

<div style="text-align: right; margin-top: 20px; border: 2px solid #000; padding: 10px; display: flex; justify-content: flex-end; position: fixed; right: 10px; bottom: 20px; width: auto;">
    <a href="@Url.Action("Index", new { year = year, month = month, week = week + 1 })" style="text-decoration: none; color: #000; font-size: 1rem;">Semaine suivante →</a>
</div>
