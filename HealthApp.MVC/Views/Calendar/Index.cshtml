@{
    ViewData["Title"] = "Calendrier Dynamique";
    int year = ViewBag.CurrentYear;
    int month = ViewBag.CurrentMonth;
    int week = ViewBag.CurrentWeek;
    var events = ViewBag.Events as List<hospital.Models.Calendar>;
    var startOfWeek = ViewBag.StartOfWeek as DateTime? ?? DateTime.Now;
}

<h2 style="text-align: center;">Semaine du @startOfWeek.ToString("dd MMMM yyyy")</h2>

<!-- Centrage du tableau avec flexbox -->
<div style="display: flex; flex-direction: column; width: 80vw; height: 80vh; justify-content: center; align-items: center; margin: 0 auto;">
    <table style="width: 100%; height: 100%; border-collapse: collapse;">
        <thead>
        <tr style="background-color: #f0f0f0;">
            <th style="width: 14%;">Lun</th>
            <th style="width: 14%;">Mar</th>
            <th style="width: 14%;">Mer</th>
            <th style="width: 14%;">Jeu</th>
            <th style="width: 14%;">Ven</th>
            <th style="width: 14%;">Sam</th>
            <th style="width: 14%;">Dim</th>
        </tr>
        </thead>
        <tbody>
        <tr style="height: 14%;">
            @for (int i = 0; i < 7; i++)
            {
                var currentDate = startOfWeek.AddDays(i);
                var eventToday = events?.FirstOrDefault(e => e.Date.Date == currentDate.Date);
                <td style="border: 1px solid black; text-align: center; vertical-align: top; padding: 10px;">
                    <b>@currentDate.Day</b>
                    @if (eventToday != null)
                    {
                        <br><span style="color: red; font-weight: bold;">@eventToday.Title</span>
                    }
                </td>
            }
        </tr>
        </tbody>
    </table>
</div>

<!-- Liens pour navigation entre les semaines -->
<div style="text-align: left; margin-top: 20px; border: 2px solid #000; padding: 10px; display: flex; justify-content: flex-start; width: 300px; position: absolute; left: 0; margin: 0;">
    <a href="@Url.Action("Index", new { year = year, month = month, week = week - 1 })" style="text-decoration: none; color: #000;">← Semaine précédente</a>
</div>

<div style="text-align: right; margin-top: 20px; border: 2px solid #000; padding: 10px; display: flex; justify-content: flex-end; width: 300px; position: absolute; right: 0; margin: 0;">
    <a href="@Url.Action("Index", new { year = year, month = month, week = week + 1 })" style="text-decoration: none; color: #000;">Semaine suivante →</a>
</div>



